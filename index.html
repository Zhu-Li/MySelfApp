<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="è§‚å·± - é™è§‚å·±å¿ƒï¼Œå†…å¤–æ¾„æ˜ã€‚å…¨æ–¹ä½äº†è§£è‡ªå·±çš„æ€§æ ¼ç‰¹å¾ã€å…´è¶£çˆ±å¥½ã€èƒ½åŠ›ä¼˜åŠ¿ï¼Œç”Ÿæˆä¸ªæ€§åŒ–ç”¨æˆ·ç”»åƒ">
  <meta name="theme-color" content="#6366f1">
  <title>è§‚å·± - é™è§‚å·±å¿ƒï¼Œå†…å¤–æ¾„æ˜</title>
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/theme-light.css">
  <link rel="stylesheet" href="css/theme-dark.css">
  
  <style>
    /* åº”ç”¨å¸ƒå±€æ ·å¼ */
    .app-container {
      min-height: 100vh;
      padding-top: var(--header-height);
    }

    .main-content {
      max-width: var(--container-max-width);
      margin: 0 auto;
      padding: var(--spacing-lg);
    }

    /* é¡µé¢è¿‡æ¸¡åŠ¨ç”» */
    .page-container {
      animation: fadeIn var(--transition-normal);
    }

    /* è®¾ç½®é¡µé¢åˆå§‹åŒ–åŠ è½½çŠ¶æ€ */
    .app-loading {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-color: var(--bg-secondary);
      z-index: 9999;
    }

    .app-loading-logo {
      font-size: 3rem;
      margin-bottom: var(--spacing-lg);
    }

    .app-loading-text {
      color: var(--text-secondary);
      margin-top: var(--spacing-md);
    }

    /* åˆå§‹åŒ–æ¨¡æ€æ¡†æ ·å¼ */
    .setup-modal {
      max-width: 480px;
    }

    .setup-step {
      display: none;
    }

    .setup-step.active {
      display: block;
    }

    .setup-header {
      text-align: center;
      margin-bottom: var(--spacing-xl);
    }

    .setup-icon {
      font-size: 4rem;
      margin-bottom: var(--spacing-md);
    }

    .setup-title {
      font-size: var(--font-size-2xl);
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: var(--spacing-sm);
    }

    .setup-desc {
      color: var(--text-secondary);
    }

    .setup-form {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-lg);
    }

    .setup-actions {
      display: flex;
      gap: var(--spacing-md);
      margin-top: var(--spacing-lg);
    }

    .setup-actions .btn {
      flex: 1;
    }

    /* åº•éƒ¨å¯¼èˆªï¼ˆç§»åŠ¨ç«¯ï¼‰ */
    .bottom-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: var(--bg-primary);
      border-top: 1px solid var(--border-color);
      padding: var(--spacing-sm);
      z-index: 100;
    }

    .bottom-nav-list {
      display: flex;
      justify-content: space-around;
    }

    .bottom-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--spacing-xs);
      padding: var(--spacing-sm);
      color: var(--text-secondary);
      font-size: var(--font-size-xs);
      border-radius: var(--radius-md);
      transition: all var(--transition-fast);
    }

    .bottom-nav-item:hover,
    .bottom-nav-item.active {
      color: var(--color-primary);
    }

    .bottom-nav-icon {
      font-size: 1.25rem;
    }

    /* è®°ä½æˆ‘å¤é€‰æ¡†æ ·å¼ */
    .remember-me-label {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      cursor: pointer;
      font-size: var(--font-size-sm);
      color: var(--text-secondary);
    }

    .remember-me-checkbox {
      width: 18px;
      height: 18px;
      cursor: pointer;
      accent-color: var(--color-primary);
    }

    @media (max-width: 768px) {
      .bottom-nav {
        display: block;
      }

      .app-container {
        padding-bottom: 72px;
      }

      .header-nav {
        display: none;
      }
    }
  </style>
</head>
<body>
  <!-- åŠ è½½çŠ¶æ€ -->
  <div class="app-loading" id="appLoading">
    <div class="app-loading-logo">ğŸ”®</div>
    <div class="loading-spinner loading-spinner-lg"></div>
    <p class="app-loading-text">é™è§‚å·±å¿ƒï¼Œå†…å¤–æ¾„æ˜...</p>
  </div>

  <!-- å¤´éƒ¨å¯¼èˆª -->
  <header class="header">
    <div class="header-inner">
      <a href="#/" class="header-logo">
        <span>ğŸ”®</span>
        <span>è§‚å·±</span>
      </a>
      
      <nav class="header-nav">
        <a href="#/" class="nav-item" data-nav="home">
          <span class="nav-item-icon">ğŸ </span>
          <span>é¦–é¡µ</span>
        </a>
        <a href="#/test" class="nav-item" data-nav="test">
          <span class="nav-item-icon">ğŸ“</span>
          <span>æµ‹è¯•</span>
        </a>
        <a href="#/diary" class="nav-item" data-nav="diary">
          <span class="nav-item-icon">ğŸ“”</span>
          <span>æ—¥è®°</span>
        </a>
        <a href="#/chat" class="nav-item" data-nav="chat">
          <span class="nav-item-icon">ğŸ¤–</span>
          <span>é—®ç­”</span>
        </a>
        <a href="#/report" class="nav-item" data-nav="report">
          <span class="nav-item-icon">ğŸ“Š</span>
          <span>æŠ¥å‘Š</span>
        </a>
      </nav>

      <div class="header-actions">
        <button class="btn btn-icon btn-ghost" id="themeToggle" title="åˆ‡æ¢ä¸»é¢˜">
          <span id="themeIcon">ğŸŒ™</span>
        </button>
        <a href="#/settings" class="btn btn-icon btn-ghost" title="è®¾ç½®">
          <span>âš™ï¸</span>
        </a>
      </div>
    </div>
  </header>

  <!-- ä¸»å†…å®¹åŒºåŸŸ -->
  <div class="app-container">
    <main class="main-content" id="mainContent">
      <!-- é¡µé¢å†…å®¹ç”±è·¯ç”±åŠ¨æ€åŠ è½½ -->
    </main>
  </div>

  <!-- åº•éƒ¨å¯¼èˆªï¼ˆç§»åŠ¨ç«¯ï¼‰ -->
  <nav class="bottom-nav">
    <div class="bottom-nav-list">
      <a href="#/" class="bottom-nav-item" data-nav="home">
        <span class="bottom-nav-icon">ğŸ </span>
        <span>é¦–é¡µ</span>
      </a>
      <a href="#/test" class="bottom-nav-item" data-nav="test">
        <span class="bottom-nav-icon">ğŸ“</span>
        <span>æµ‹è¯•</span>
      </a>
      <a href="#/chat" class="bottom-nav-item" data-nav="chat">
        <span class="bottom-nav-icon">ğŸ¤–</span>
        <span>é—®ç­”</span>
      </a>
      <a href="#/diary" class="bottom-nav-item" data-nav="diary">
        <span class="bottom-nav-icon">ğŸ“”</span>
        <span>æ—¥è®°</span>
      </a>
      <a href="#/settings" class="bottom-nav-item" data-nav="settings">
        <span class="bottom-nav-icon">âš™ï¸</span>
        <span>è®¾ç½®</span>
      </a>
    </div>
  </nav>

  <!-- Toast å®¹å™¨ -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- åˆå§‹åŒ–è®¾ç½®æ¨¡æ€æ¡† -->
  <div class="modal-overlay" id="setupModal">
    <div class="modal setup-modal">
      <!-- æ­¥éª¤1ï¼šæ¬¢è¿ -->
      <div class="setup-step active" data-step="1">
        <div class="modal-body">
          <div class="setup-header">
            <div class="setup-icon">ğŸ”®</div>
            <h2 class="setup-title">æ¬¢è¿ä½¿ç”¨ã€Œè§‚å·±ã€</h2>
            <p class="setup-desc">é™è§‚å·±å¿ƒï¼Œå†…å¤–æ¾„æ˜ã€‚å¼€å§‹æ¢ç´¢çœŸå®çš„è‡ªå·±ï¼Œäº†è§£ä½ çš„æ€§æ ¼ç‰¹å¾ä¸å†…åœ¨ä¸–ç•Œ</p>
          </div>
          <div class="setup-actions">
            <button class="btn btn-primary btn-lg btn-block" onclick="App.nextSetupStep()">
              å¼€å§‹è®¾ç½®
            </button>
          </div>
        </div>
      </div>

      <!-- æ­¥éª¤2ï¼šè®¾ç½®å¯†ç  -->
      <div class="setup-step" data-step="2">
        <div class="modal-header">
          <h3 class="modal-title">è®¾ç½®è®¿é—®å¯†ç </h3>
        </div>
        <div class="modal-body">
          <p class="text-secondary mb-lg">è®¾ç½®å¯†ç ä¿æŠ¤æ‚¨çš„éšç§æ•°æ®ï¼Œæ­¤å¯†ç ç”¨äºåŠ å¯†æœ¬åœ°å­˜å‚¨çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p>
          <form class="setup-form" id="passwordForm">
            <div class="input-group">
              <label class="input-label">è®¾ç½®å¯†ç </label>
              <div class="password-input-wrapper">
                <input type="password" class="input-field" id="setupPassword" 
                       placeholder="è¯·è¾“å…¥å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰" minlength="6" required>
                <button type="button" class="password-toggle btn btn-ghost btn-sm" 
                        onclick="App.togglePassword('setupPassword')">ğŸ‘ï¸</button>
              </div>
            </div>
            <div class="input-group">
              <label class="input-label">ç¡®è®¤å¯†ç </label>
              <div class="password-input-wrapper">
                <input type="password" class="input-field" id="setupPasswordConfirm" 
                       placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç " minlength="6" required>
                <button type="button" class="password-toggle btn btn-ghost btn-sm" 
                        onclick="App.togglePassword('setupPasswordConfirm')">ğŸ‘ï¸</button>
              </div>
            </div>
          </form>
          <div class="setup-actions">
            <button class="btn btn-secondary" onclick="App.prevSetupStep()">ä¸Šä¸€æ­¥</button>
            <button class="btn btn-primary" onclick="App.nextSetupStep()">ä¸‹ä¸€æ­¥</button>
          </div>
        </div>
      </div>

      <!-- æ­¥éª¤3ï¼šé…ç½®API -->
      <div class="setup-step" data-step="3">
        <div class="modal-header">
          <h3 class="modal-title">é…ç½®AIæœåŠ¡</h3>
        </div>
        <div class="modal-body">
          <p class="text-secondary mb-lg">é…ç½®ç¡…åŸºæµåŠ¨APIå¯†é’¥ï¼Œç”¨äºAIæ™ºèƒ½åˆ†ææ‚¨çš„æµ‹è¯•ç»“æœã€‚</p>
          <form class="setup-form" id="apiForm">
            <div class="input-group">
              <label class="input-label">API å¯†é’¥</label>
              <div class="password-input-wrapper">
                <input type="password" class="input-field" id="setupApiKey" 
                       placeholder="è¯·è¾“å…¥ç¡…åŸºæµåŠ¨ API Key">
                <button type="button" class="password-toggle btn btn-ghost btn-sm" 
                        onclick="App.togglePassword('setupApiKey')">ğŸ‘ï¸</button>
              </div>
              <span class="input-hint">å¯åœ¨ <a href="https://cloud.siliconflow.cn/i/DG53MZpo" target="_blank">ç¡…åŸºæµåŠ¨æ§åˆ¶å°</a> è·å–</span>
            </div>
            <div class="input-group">
              <label class="input-label">é€‰æ‹©æ¨¡å‹</label>
              <select class="input-field" id="setupModel">
                <option value="deepseek-ai/DeepSeek-V3">DeepSeek-V3ï¼ˆæ¨èï¼‰</option>
                <option value="deepseek-ai/DeepSeek-V2.5">DeepSeek-V2.5</option>
                <option value="Qwen/Qwen2.5-72B-Instruct">Qwen2.5-72B</option>
                <option value="Qwen/Qwen2.5-32B-Instruct">Qwen2.5-32B</option>
              </select>
            </div>
          </form>
          <div class="setup-actions">
            <button class="btn btn-secondary" onclick="App.prevSetupStep()">ä¸Šä¸€æ­¥</button>
            <button class="btn btn-primary" onclick="App.completeSetup()">å®Œæˆè®¾ç½®</button>
          </div>
          <p class="text-center text-tertiary mt-md" style="font-size: var(--font-size-xs);">
            æš‚æ—¶è·³è¿‡ï¼Ÿå¯ç¨ååœ¨è®¾ç½®ä¸­é…ç½®
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- å¯†ç éªŒè¯æ¨¡æ€æ¡† -->
  <div class="modal-overlay" id="unlockModal">
    <div class="modal" style="max-width: 400px;">
      <div class="modal-body">
        <div class="setup-header">
          <div class="setup-icon">ğŸ”</div>
          <h2 class="setup-title">éªŒè¯èº«ä»½</h2>
          <p class="setup-desc">è¯·è¾“å…¥å¯†ç è§£é”åº”ç”¨</p>
        </div>
        <form class="setup-form" id="unlockForm" onsubmit="App.unlock(event)">
          <div class="input-group">
            <div class="password-input-wrapper">
              <input type="password" class="input-field input-field-lg" id="unlockPassword" 
                     placeholder="è¯·è¾“å…¥å¯†ç " required autofocus>
              <button type="button" class="password-toggle btn btn-ghost btn-sm" 
                      onclick="App.togglePassword('unlockPassword')">ğŸ‘ï¸</button>
            </div>
          </div>
          <label class="remember-me-label">
            <input type="checkbox" id="rememberMe" class="remember-me-checkbox">
            <span>è®°ä½æˆ‘ï¼ˆ7å¤©å†…å…å¯†ç™»å½•ï¼‰</span>
          </label>
          <button type="submit" class="btn btn-primary btn-lg btn-block">è§£é”</button>
        </form>
        <div class="divider-text mt-lg">
          <span>æˆ–</span>
        </div>
        <button class="btn btn-danger btn-block mt-md" onclick="App.confirmEmergencyClear()">
          ç´§æ€¥æ¸…é™¤æ‰€æœ‰æ•°æ®
        </button>
      </div>
    </div>
  </div>

  <!-- ç¡®è®¤æ¸…é™¤æ¨¡æ€æ¡† -->
  <div class="modal-overlay" id="confirmClearModal">
    <div class="modal" style="max-width: 400px;">
      <div class="modal-header">
        <h3 class="modal-title">ç¡®è®¤æ¸…é™¤æ•°æ®</h3>
        <button class="modal-close" onclick="App.hideModal('confirmClearModal')">âœ•</button>
      </div>
      <div class="modal-body">
        <p class="text-danger mb-md"><strong>è­¦å‘Šï¼šæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼</strong></p>
        <p class="text-secondary">å°†æ°¸ä¹…åˆ é™¤æ‰€æœ‰æœ¬åœ°å­˜å‚¨çš„æ•°æ®ï¼ŒåŒ…æ‹¬ï¼š</p>
        <ul class="mt-md mb-lg" style="list-style: disc; padding-left: var(--spacing-lg); color: var(--text-secondary);">
          <li>æ‰€æœ‰æµ‹è¯•è®°å½•å’Œç»“æœ</li>
          <li>ä¸ªäººæ—¥è®°å†…å®¹</li>
          <li>ç”¨æˆ·ç”»åƒæ•°æ®</li>
          <li>åº”ç”¨è®¾ç½®å’Œé…ç½®</li>
        </ul>
        <div class="input-group">
          <label class="input-label">è¯·è¾“å…¥ "ç¡®è®¤åˆ é™¤" ä»¥ç»§ç»­</label>
          <input type="text" class="input-field" id="confirmClearInput" placeholder="ç¡®è®¤åˆ é™¤">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="App.hideModal('confirmClearModal')">å–æ¶ˆ</button>
        <button class="btn btn-danger" onclick="App.emergencyClear()">æ°¸ä¹…åˆ é™¤</button>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="js/utils.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/api.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/router.js"></script>
  <script src="modules/core/profile.js"></script>
  <script src="modules/mbti/questions.js"></script>
  <script src="modules/mbti/mbti.js"></script>
  <script src="modules/mbti/report.js"></script>
  <script src="modules/bigfive/questions.js"></script>
  <script src="modules/bigfive/bigfive.js"></script>
  <script src="modules/bigfive/report.js"></script>
  <script src="modules/holland/questions.js"></script>
  <script src="modules/holland/holland.js"></script>
  <script src="modules/holland/report.js"></script>
  <script src="modules/comprehensive/comprehensive.js"></script>
  <script src="modules/diary/diary.js"></script>
  <script src="modules/donate/donate.js"></script>
  <script src="modules/feedback/feedback.js"></script>
  <script src="modules/changelog/changelog.js"></script>
  <script src="modules/chat/chat.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
